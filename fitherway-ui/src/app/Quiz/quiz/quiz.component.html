<div class="quiz-wrapper">

  <!-- Top Navigation -->
  <div class="top-progress-wrapper">
    <!-- Back Button -->
    <button *ngIf="step > 0" class="back-btn" (click)="prevStep()">&#60;</button>

    <!-- Progress Bar -->
    <div class="progress-bar">
      <div class="step" *ngFor="let s of [].constructor(totalSteps); let i = index" [class.active]="i <= step">
      </div>
    </div>

    <!-- Step Counter -->
    <div class="step-counter">{{ step + 0 }}/{{ totalSteps }}</div>
  </div>

  <!-- Step 1: Age -->
  <div *ngIf="step === 0" class="step-content">
    <h2>Choose your age range</h2>
    <div class="option" *ngFor="let age of ages" (click)="nextStep(age)">
      <span>{{ age.emoji }}</span>
      <strong>{{ age.label }}</strong>
    </div>
  </div>

  <!-- Step 2: Goal -->
  <div *ngIf="step === 1" class="step-content">
    <h2>What is your main goal?</h2>
    <div class="option" *ngFor="let goal of goals" (click)="nextStep(goal)">
      <span>{{ goal.emoji }}</span>
      <strong>{{ goal.label }}</strong>
    </div>
  </div>

  <div *ngIf="step === 2" class="step-content">
    <h2>Choose your current body shape</h2>
    <div class="option" *ngFor="let shape of shapes" (click)="nextStep(shape)">
      <span>{{ shape.emoji }}</span>
      <strong>{{ shape.label }}</strong>
    </div>
  </div>

  <div *ngIf="step === 3" class="step-content">
    <h2>What is your dream body?</h2>
    <div class="option" *ngFor="let dream of dreams" (click)="nextStep(dream)">
      <span>{{ dream.emoji }}</span>
      <strong>{{ dream.label }}</strong>
    </div>
  </div>

  <!-- Step 3: Experience -->
  <div *ngIf="step === 4" class="step-content">
    <h2>Your experience level?</h2>
    <div class="option" *ngFor="let ex of experience" (click)="nextStep(ex)">
      <span>{{ ex.emoji }}</span>
      <strong>{{ ex.label }}</strong>
    </div>
  </div>

  <div *ngIf="step === 5" class="step-content">
    <h2>How often do you exercise?</h2>
    <div class="option" *ngFor="let exercise of exercises" (click)="nextStep(exercise)">
      <span>{{ exercise.emoji }}</span>
      <strong>{{ exercise.label }}</strong>
    </div>
  </div>

  <div *ngIf="step === 6" class="step-content">
    <h2>How long ago were you in the best shape of your life?</h2>
    <div class="option" *ngFor="let bestSh of bestShape" (click)="nextStep(bestSh)">
      <span>{{ bestSh.emoji }}</span>
      <strong>{{ bestSh.label }}</strong>
    </div>
  </div>

  <div *ngIf="step === 7" class="step-content">
    <h2>How often do you want to workout?</h2>
    <div class="option" *ngFor="let preferDay of preferDays" (click)="nextStep(preferDay)">
      <strong>{{ preferDay.label }}</strong>
    </div>
  </div>

  <div *ngIf="step === 8" class="step-content">
    <h2>How long do you want your workouts to be?</h2>
    <div class="option" *ngFor="let preferTime of preferTimes" (click)="nextStep(preferTime)">
      <strong>{{ preferTime.label }}</strong>
    </div>
  </div>

  <div *ngIf="step === 9" class="step-content">
    <h2>When did you prefer to workouts?</h2>
    <div class="option" *ngFor="let preferDayTime of preferDayTimes" (click)="nextStep(preferDayTime)">
      <span>{{ preferDayTime.emoji }}</span>
      <strong>{{ preferDayTime.label }}</strong>
    </div>
  </div>

  <div *ngIf="step === 10" class="step-content">
    <h2>What equipment do you have available?</h2>
    <div class="option" *ngFor="let equipment of equipments " (click)="nextStep(equipment)">
      <strong>{{ equipment.label }}</strong> <br>
      <span>{{ equipment.subtitle }}</span>

    </div>
  </div> 

<!-- Step 11: Actual Age -->
<div *ngIf="step === 11" class="step-content">
  <h2>Enter your actual age</h2>
  <div class="form-row mt-3">
    <input
      type="number"
      min="10"
      max="99"
      class="form-control"
      [(ngModel)]="userData.actualAge"
      placeholder="Age"
    />
  </div>
  <div class="text-danger" *ngIf="!isActualAgeValid() && userData.actualAge">
    Age must be between 10 and 99.
  </div>
  <button class="btn next-btn" [disabled]="!isActualAgeValid()" (click)="nextStep()">Next</button>
</div>

<!-- Step 12: Weight -->
<div *ngIf="step === 12" class="step-content">
  <h2>Enter your current weight</h2>
  <div class="toggle-switch">
    <button class="toggle-btn" [class.active]="bmi.weightUnit === 'kg'" (click)="bmi.weightUnit = 'kg'">kg</button>
    <button class="toggle-btn" [class.active]="bmi.weightUnit === 'lb'" (click)="bmi.weightUnit = 'lb'">lb</button>
  </div>
  <div class="form-row mt-3">
    <input
      type="number"
      min="20"
      max="300"
      class="form-control"
      [(ngModel)]="bmi.weight"
      (focus)="onInputFocus()"
      (blur)="onInputBlur()"
      [placeholder]="'' + bmi.weightUnit"
    />
  </div>
  <div class="text-danger" *ngIf="!isWeightValid() && bmi.weight">Invalid weight entered.</div>
  <div class="bmi-info-card" *ngIf="showBmiInfo">
    <h3>Calculating your BMI</h3>
    <p>BMI is used to estimate risk levels of potential health issues.</p>
  </div>
  <button class="btn next-btn" [disabled]="!isWeightValid()" (click)="nextStep()">Next</button>
</div>

<!-- Step 13: Height -->
<div *ngIf="step === 13" class="step-content">
  <h2>Enter your current height</h2>
  <div class="toggle-switch">
    <button class="toggle-btn" [class.active]="bmi.heightUnit === 'cm'" (click)="bmi.heightUnit = 'cm'">cm</button>
    <button class="toggle-btn" [class.active]="bmi.heightUnit === 'ft'" (click)="bmi.heightUnit = 'ft'">ft/in</button>
  </div>
  <div class="form-row mt-3" *ngIf="bmi.heightUnit === 'cm'">
    <input type="number" class="form-control" [(ngModel)]="bmi.height" placeholder="cm" (focus)="onInputFocus()" (blur)="onInputBlur()" />
  </div>
  <div class="form-row inline-inputs mt-3" *ngIf="bmi.heightUnit === 'ft'">
    <input type="number" class="form-control me-2" [(ngModel)]="bmi.heightFeet" placeholder="ft" (focus)="onInputFocus()" (blur)="onInputBlur()" />
    <input type="number" class="form-control" [(ngModel)]="bmi.heightInch" placeholder="in" (focus)="onInputFocus()" (blur)="onInputBlur()" />
  </div>
  <div class="text-danger" *ngIf="!isHeightValid() && (bmi.height || bmi.heightFeet)">Invalid height entered.</div>
  <div class="bmi-info-card" *ngIf="showBmiInfo">
    <h3>Calculating your BMI</h3>
    <p>This is used to calculate your body mass index (BMI).</p>
  </div>
  <button class="btn next-btn" [disabled]="!isHeightValid()" (click)="calculateBMI()">Next</button>
</div>

<!-- Step 14: BMI Summary -->
<div *ngIf="step === 14" class="step-content">
  <h2>Your Fitness Profile</h2>
  <div class="summary-card">
    <div class="summary-title">
      <h3>Body Mass Index (BMI)</h3>
    </div>
    <div class="bmi-indicator-container" *ngIf="showBmiResult">
      <div class="bmi-indicator-bar">
        <div class="bmi-marker" [ngStyle]="{'left': getBmiPosition() + '%'}"></div>
        <div class="bmi-labels">
          <span>Underweight</span>
          <span>Healthy</span>
          <span>Overweight</span>
          <span>Obese</span>
        </div>
      </div>
      <div class="summary">
        <p><strong>Age:</strong> {{ userData.actualAge }}</p>
        <p><strong>Goal:</strong> {{ userData.goal }}</p>
        <p><strong>Experience:</strong> {{ userData.experience }}</p>
        <p><strong>Weight:</strong> {{ bmi.weight }} {{ bmi.weightUnit }}</p>
        <p><strong>Height:</strong> {{ getFormattedHeight() }}</p>
        <p><strong>BMI:</strong> {{ bmi.result }}</p>
      </div>
    </div>
    <div class="bmi-message-card">
      <p>{{ bmiMessage }}</p>
    </div>
    <button class="submit-btn" (click)="submitForm()">Finish</button>
  </div>
</div>







 